<html><head><title>Warble</title><style type="text/css">.lst-kix_whutoqnu9xi5-8>li{counter-increment:lst-ctn-kix_whutoqnu9xi5-8}.lst-kix_whutoqnu9xi5-6>li{counter-increment:lst-ctn-kix_whutoqnu9xi5-6}ol.lst-kix_whutoqnu9xi5-1.start{counter-reset:lst-ctn-kix_whutoqnu9xi5-1 0}.lst-kix_whutoqnu9xi5-7>li:before{content:"" counter(lst-ctn-kix_whutoqnu9xi5-7,lower-latin) ". "}.lst-kix_whutoqnu9xi5-1>li:before{content:"" counter(lst-ctn-kix_whutoqnu9xi5-1,lower-latin) ". "}.lst-kix_whutoqnu9xi5-7>li{counter-increment:lst-ctn-kix_whutoqnu9xi5-7}ol.lst-kix_whutoqnu9xi5-6.start{counter-reset:lst-ctn-kix_whutoqnu9xi5-6 0}.lst-kix_whutoqnu9xi5-2>li:before{content:"" counter(lst-ctn-kix_whutoqnu9xi5-2,lower-roman) ". "}ol.lst-kix_whutoqnu9xi5-7{list-style-type:none}ol.lst-kix_whutoqnu9xi5-8{list-style-type:none}ol.lst-kix_whutoqnu9xi5-5{list-style-type:none}ol.lst-kix_whutoqnu9xi5-6{list-style-type:none}.lst-kix_whutoqnu9xi5-5>li{counter-increment:lst-ctn-kix_whutoqnu9xi5-5}ol.lst-kix_whutoqnu9xi5-3{list-style-type:none}ol.lst-kix_whutoqnu9xi5-4{list-style-type:none}.lst-kix_whutoqnu9xi5-1>li{counter-increment:lst-ctn-kix_whutoqnu9xi5-1}.lst-kix_whutoqnu9xi5-0>li:before{content:"" counter(lst-ctn-kix_whutoqnu9xi5-0,decimal) ". "}.lst-kix_whutoqnu9xi5-2>li{counter-increment:lst-ctn-kix_whutoqnu9xi5-2}ol.lst-kix_whutoqnu9xi5-3.start{counter-reset:lst-ctn-kix_whutoqnu9xi5-3 0}.lst-kix_whutoqnu9xi5-4>li:before{content:"" counter(lst-ctn-kix_whutoqnu9xi5-4,lower-latin) ". "}ol.lst-kix_whutoqnu9xi5-2.start{counter-reset:lst-ctn-kix_whutoqnu9xi5-2 0}.lst-kix_whutoqnu9xi5-4>li{counter-increment:lst-ctn-kix_whutoqnu9xi5-4}ol.lst-kix_whutoqnu9xi5-0.start{counter-reset:lst-ctn-kix_whutoqnu9xi5-0 0}.lst-kix_whutoqnu9xi5-3>li:before{content:"" counter(lst-ctn-kix_whutoqnu9xi5-3,decimal) ". "}ol.lst-kix_whutoqnu9xi5-8.start{counter-reset:lst-ctn-kix_whutoqnu9xi5-8 0}ol.lst-kix_whutoqnu9xi5-0{list-style-type:none}ol.lst-kix_whutoqnu9xi5-2{list-style-type:none}ol.lst-kix_whutoqnu9xi5-4.start{counter-reset:lst-ctn-kix_whutoqnu9xi5-4 0}.lst-kix_whutoqnu9xi5-5>li:before{content:"" counter(lst-ctn-kix_whutoqnu9xi5-5,lower-roman) ". "}ol.lst-kix_whutoqnu9xi5-1{list-style-type:none}ol.lst-kix_whutoqnu9xi5-7.start{counter-reset:lst-ctn-kix_whutoqnu9xi5-7 0}.lst-kix_whutoqnu9xi5-0>li{counter-increment:lst-ctn-kix_whutoqnu9xi5-0}.lst-kix_whutoqnu9xi5-8>li:before{content:"" counter(lst-ctn-kix_whutoqnu9xi5-8,lower-roman) ". "}.lst-kix_whutoqnu9xi5-6>li:before{content:"" counter(lst-ctn-kix_whutoqnu9xi5-6,decimal) ". "}.lst-kix_whutoqnu9xi5-3>li{counter-increment:lst-ctn-kix_whutoqnu9xi5-3}ol.lst-kix_whutoqnu9xi5-5.start{counter-reset:lst-ctn-kix_whutoqnu9xi5-5 0}ol{margin:0;padding:0}.c16{vertical-align:top;width:33pt;border-style:solid;border-color:#000000;border-width:1pt;padding:5pt 5pt 5pt 5pt}.c15{vertical-align:top;width:39pt;border-style:solid;border-color:#000000;border-width:1pt;padding:5pt 5pt 5pt 5pt}.c4{vertical-align:top;width:50.4pt;border-style:solid;border-color:#000000;border-width:1pt;padding:5pt 5pt 5pt 5pt}.c7{vertical-align:top;width:234pt;border-style:solid;border-color:#ffffff;border-width:1pt;padding:5pt 5pt 5pt 5pt}.c19{vertical-align:top;width:33.8pt;border-style:solid;border-color:#000000;border-width:1pt;padding:5pt 5pt 5pt 5pt}.c10{vertical-align:top;width:52.6pt;border-style:solid;border-color:#000000;border-width:1pt;padding:5pt 5pt 5pt 5pt}.c9{vertical-align:top;width:36pt;border-style:solid;border-color:#000000;border-width:1pt;padding:5pt 5pt 5pt 5pt}.c24{vertical-align:top;width:38.2pt;border-style:solid;border-color:#000000;border-width:1pt;padding:5pt 5pt 5pt 5pt}.c23{max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c27{margin:0;padding:0}.c6{padding-left:4.5pt;margin-left:18pt}.c26{color:#333333;background-color:#f9f9f9}.c11{color:#1c4587;font-size:10pt}.c1{line-height:2.0;direction:ltr}.c18{color:inherit;text-decoration:inherit}.c20{height:1px;width:33%}.c0{line-height:1.0;direction:ltr}.c21{height:131pt}.c17{font-weight:bold}.c8{text-align:right}.c12{height:0pt}.c25{color:#1c4587}.c2{height:11pt}.c14{text-indent:36pt}.c5{border-collapse:collapse}.c13{font-style:italic}.c3{direction:ltr}.c22{font-size:10pt}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt}h2{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h3{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h4{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt}h5{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}h6{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}</style></head><body class="c23"><p class="c8 c3"><span>Joshua Elliott</span></p><p class="c3 c8"><span>1-19-13</span></p><p class="c2 c3"><span></span></p><p class="c3"><span class="c17">Software Intonation Detection</span></p><p class="c2 c3"><span></span></p><p class="c1 c14"><span>Technological advances are being made every day in speech processing. For example, just last year Microsoft unveiled a demo of their new translation software that can translate from English into Chinese in real time, and in your own voice</span><sup><a href="#ftnt1" name="ftnt_ref1">[1]</a></sup><span>. At this point, replicating Microsoft&rsquo;s success would take an enormous amount of processing power, very complicated algorithms, and probably an entire team of software engineers to work on it for a few years. But what if we just look at one small piece of that process? If we break down everything that is involved in speech processing, we should be able to reproduce some small part of it relatively easily. This is the same principle that drives developing any large software project, as well as any type of engineering project: break the problem down into smaller and smaller pieces until you can start to solve them. My initial goal was to try to detect emotion in a speaker&rsquo;s voice, but I quickly realized that would be too ambitious for this project. I settled on trying to categorize the type of sentence (declarative, question, etc.) in a recorded voice. The question I wanted to answer was whether or not this could be done with fairly simple software; and if so, what the best way to do it would be.</span></p><p class="c1 c14"><span>Surprisingly, one of the most difficult parts of any acoustic analysis is just finding the important frequencies. Working on this project has given me a new appreciation for software like Praat, for which frequency detection is just the very beginning. Much research has been done in this area</span><sup><a href="#ftnt2" name="ftnt_ref2">[2]</a></sup><span>, but is outside the scope of this project (and probably outside the scope of linguistics, being more safely within the realm of computer science and digital signal processing). With this in mind, I started out trying to use a simple algorithm for pitch detection, and then using that data for detecting intonation patterns. However, it turned out that such a simple algorithm was not capable of producing enough useable data. There are a few salient reasons for this, and probably quite a few less obvious ones. One problem is the error inherent in any recording medium; it is not 100% representative of the source sound. You have background noise, low sensitivity recording devices, and some error margin in the software as well. The other reason is that human speech is a very imprecise thing. Even after you account for imperfections in a person&rsquo;s voice, you have to deal with the complexities of the sounds themselves. For example, you aren&rsquo;t going to have any detectable pitch during a stop, and you don&rsquo;t have a meaningful one during a voiceless sound. And simple software can&rsquo;t be expected to reliably deal with these things. So one of the first things I wanted to improve was the pitch detection. Knowing that this was far too large a task for this project, I looked for something that had already been created to do this. What I settled upon was </span><span class="c13">aubio</span><span>, a free software library that is &ldquo;</span><span>designed for the extraction of annotations from audio signals.&rdquo; </span><sup><a href="#ftnt3" name="ftnt_ref3">[3]</a></sup><span>&nbsp;Figure 1 shows the Praat analysis of stimulus 1 (&ldquo;Today is Wednesday.&rdquo;) on the left, compared to the analysis of the first draft of my software (referred to hereafter as </span><span class="c13">warble</span><span>) on the right.</span></p><a href="#" name="0b2f71968b0374abd6ffaa194fb7c3b346b8802c"></a><a href="#" name="0"></a><table cellpadding="0" cellspacing="0" class="c5"><tbody><tr class="c21"><td class="c7"><p class="c0 c2"><span></span></p><p class="c0"><img height="173" src="images/image09.png" width="293"></p></td><td class="c7"><p class="c0"><img height="199" src="images/image12.png" width="218"></p></td></tr></tbody></table><p class="c0"><span class="c13">Figure 1 - Stimulus 1</span></p><p class="c0 c2"><span></span></p><p class="c1"><span>The warble graph appears completely useless, and doesn&rsquo;t seem to have any relation to the Praat analysis of the pitch. In these figures I am not including the actual frequency values because, for the purposes of this project, I am more interested in intonation patterns than actual values. However, in this case the omission is critical because the Praat graph has a vertical pitch scaled from 75 Hz to 200 Hz while the warble graph scales from 0 Hz to 6000 Hz. This is clearly a problem, and does not actually represent the pitches we are looking for. Based on the list of difficulties with pitch detection mentioned above, especially with regard to stops and voiceless sounds, this makes sense. Looking closer, we notice that the highest peaks in the warble graph correspond exactly with the gaps in the Praat graph. Looking at the full spectrogram (Appx. B, Stimulus 1) confirms that the peaks are caused by bursts and fricatives in the stimulus sentence.</span></p><p class="c1"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;At this point I started creating filters that would eliminate the data that wasn&rsquo;t relevant. By examining all the recordings for subject 1 in Praat, I determined that his pitch never went above 170 Hz, so the first thing I did was filter out all the data points above 170 Hz. In the original graph there were also some places where the pitch appeared to go to zero. These were the points where no pitch could be found, and I filtered them out as well. Figure 2 shows the filtered warble data, again on the left.</span></p><a href="#" name="21db45fcf2e620e467d4e75a57b2b2faeeb2cf3a"></a><a href="#" name="1"></a><table cellpadding="0" cellspacing="0" class="c5"><tbody><tr><td class="c7"><p class="c0"><img height="173" src="images/image09.png" width="293"></p></td><td class="c7"><p class="c0"><img height="182" src="images/image00.png" width="235"></p></td></tr></tbody></table><p class="c1"><span class="c13">Figure 2 - Stimulus 1, filtered</span></p><p class="c1"><span>This certainly looks more like an intonation pattern. Based on these graphs, and the stimulus, we can clearly categorize the intonation pattern as rising-falling, which is in line with what we would expect from a declarative sentence. There is a bit more work to be done in order for warble to reach to the same conclusion we have, but we will address that later. For now we will examine some more complicated examples. Figure 3 shows the Praat and warble data for stimulus 7 (&ldquo;It&rsquo;s raining, isn&rsquo;t it?&rdquo;). Figure 4 shows stimulus 8, which is the same tag question, but with an unsure tone.</span></p><a href="#" name="21db45fcf2e620e467d4e75a57b2b2faeeb2cf3a"></a><a href="#" name="2"></a><table cellpadding="0" cellspacing="0" class="c5"><tbody><tr><td class="c7"><p class="c0"><img height="176" src="images/image07.png" width="299"></p></td><td class="c7"><p class="c0"><img height="189" src="images/image14.png" width="259"></p></td></tr></tbody></table><p class="c1"><span class="c13">Figure 3 - Stimulus 7 - &ldquo;It&rsquo;s raining, isn&rsquo;t it?</span></p><a href="#" name="21db45fcf2e620e467d4e75a57b2b2faeeb2cf3a"></a><a href="#" name="3"></a><table cellpadding="0" cellspacing="0" class="c5"><tbody><tr><td class="c7"><p class="c0"><img height="175" src="images/image15.png" width="265"></p></td><td class="c7"><p class="c0"><img height="174" src="images/image05.png" width="220"></p></td></tr></tbody></table><p class="c1"><span class="c13">Figure 4 - Stimulus 8 - &ldquo;It&rsquo;s raining, isn&rsquo;t it?&rdquo; (unsure)</span></p><p class="c1"><span>Both of these sentences have a rising-falling component for &ldquo;It&rsquo;s raining...&rdquo;. The regular tag question has another rising-falling component for &ldquo;isn&rsquo;t it?&rdquo;, and the unsure tag question just has a rising component. These things are obvious to a human observer, but can be unintuitive to put into formal logic (code) for a computer. For example, in the second rising-falling component in figure 3 the graph appears to dip down somewhat. We look at it and unconsciously filter it out, but how would we explain that thought process to someone? Perhaps we filter it because the low point is surrounded by a peak (averaging), perhaps because it only changes the pitch by a few Hertz (vertical filter), or perhaps because it only lasts for a few fractions of a second (horizontal filter). There are many possible ways to have a computer get that analysis, many of which could be combined to produce even better results, but I chose one that would be fairly simple to implement (vertical filter). First I assign every point on the graph a direction, based on its position relative to the point before it. If the point went down I assign it a -1, and if it went up it is assigned a 1 (the first point doesn&rsquo;t get a value since there is nothing before it to compare to). After assigning these values, the data for stimulus 7 looks like this (cf. Fig. 3):</span></p><a href="#" name="b56b3651d35df328c7371f840ebc0965cac9a310"></a><a href="#" name="4"></a><table cellpadding="0" cellspacing="0" class="c5"><tbody><tr><td class="c9"><p class="c0"><span>time</span></p></td><td class="c16"><p class="c0"><span>0.32</span></p></td><td class="c15"><p class="c0"><span>0.41</span></p></td><td class="c24"><p class="c0"><span>0.46</span></p></td><td class="c19"><p class="c0"><span>0.55</span></p></td><td class="c9"><p class="c0"><span>0.60</span></p></td><td class="c9"><p class="c0"><span>0.65</span></p></td><td class="c9"><p class="c0"><span>0.69</span></p></td><td class="c9"><p class="c0"><span>0.74</span></p></td><td class="c9"><p class="c0"><span>0.83</span></p></td><td class="c9"><p class="c0"><span>0.88</span></p></td><td class="c9"><p class="c0"><span>0.92</span></p></td><td class="c9"><p class="c0"><span>0.97</span></p></td></tr><tr><td class="c9"><p class="c0"><span>pitch</span></p></td><td class="c16"><p class="c0"><span>97.4</span></p></td><td class="c15"><p class="c0"><span>111.6</span></p></td><td class="c24"><p class="c0"><span>115.3</span></p></td><td class="c19"><p class="c0"><span>95.8</span></p></td><td class="c9"><p class="c0"><span>92.0</span></p></td><td class="c9"><p class="c0"><span>93.9</span></p></td><td class="c9"><p class="c0"><span>98.5</span></p></td><td class="c9"><p class="c0"><span>96.4</span></p></td><td class="c9"><p class="c0"><span>96.8</span></p></td><td class="c9"><p class="c0"><span>86.7</span></p></td><td class="c9"><p class="c0"><span>83.8</span></p></td><td class="c9"><p class="c0"><span>82.0</span></p></td></tr><tr><td class="c9"><p class="c0"><span>direc</span></p></td><td class="c16"><p class="c0"><span>0</span></p></td><td class="c15"><p class="c0"><span>1</span></p></td><td class="c24"><p class="c0"><span>1</span></p></td><td class="c19"><p class="c0"><span>-1</span></p></td><td class="c9"><p class="c0"><span>-1</span></p></td><td class="c9"><p class="c0"><span>1</span></p></td><td class="c9"><p class="c0"><span>1</span></p></td><td class="c9"><p class="c0"><span>-1</span></p></td><td class="c9"><p class="c0"><span>1</span></p></td><td class="c9"><p class="c0"><span>-1</span></p></td><td class="c9"><p class="c0"><span>-1</span></p></td><td class="c9"><p class="c0"><span>-1</span></p></td></tr></tbody></table><p class="c0 c2"><span></span></p><p class="c1"><span>The next step is to combine all the points that are heading in the same direction</span><span>&nbsp;and find the total change in pitch for each one. This is the data for stimulus 7 after this step</span></p><a href="#" name="71531e59c89b5524301b2aa59fbbede92468a3f5"></a><a href="#" name="5"></a><table cellpadding="0" cellspacing="0" class="c5"><tbody><tr><td class="c10"><p class="c0"><span>time</span></p></td><td class="c4"><p class="c0"><span>0.41</span></p></td><td class="c4"><p class="c0"><span>0.55</span></p></td><td class="c4"><p class="c0"><span>0.65</span></p></td><td class="c4"><p class="c0"><span>0.74</span></p></td><td class="c4"><p class="c0"><span>0.83</span></p></td><td class="c4"><p class="c0"><span>0.88</span></p></td></tr><tr><td class="c10"><p class="c0"><span class="c26">&Delta;pitch</span></p></td><td class="c4"><p class="c0"><span>17.9</span></p></td><td class="c4"><p class="c0"><span>23.2</span></p></td><td class="c4"><p class="c0"><span>6.4</span></p></td><td class="c4"><p class="c0"><span>2.0</span></p></td><td class="c4"><p class="c0"><span>0.4</span></p></td><td class="c4"><p class="c0"><span>14.7</span></p></td></tr><tr><td class="c10"><p class="c0"><span>direction</span></p></td><td class="c4"><p class="c0"><span>1</span></p></td><td class="c4"><p class="c0"><span>-1</span></p></td><td class="c4"><p class="c0"><span>1</span></p></td><td class="c4"><p class="c0"><span>-1</span></p></td><td class="c4"><p class="c0"><span>1</span></p></td><td class="c4"><p class="c0"><span>-1</span></p></td></tr></tbody></table><p class="c0 c2"><span></span></p><p class="c1"><span>The last step is to filter out the points where the pitch didn&rsquo;t change by more than some threshold (5 - 15 Hz threshold usually works well).</span></p><a href="#" name="b8f5ee2c0685f2717d42da47db7d6304783cf0e9"></a><a href="#" name="6"></a><table cellpadding="0" cellspacing="0" class="c5"><tbody><tr class="c12"><td class="c10"><p class="c0"><span>time</span></p></td><td class="c4"><p class="c0"><span>0.41</span></p></td><td class="c4"><p class="c0"><span>0.55</span></p></td><td class="c4"><p class="c0"><span>0.65</span></p></td><td class="c4"><p class="c0"><span>0.88</span></p></td></tr><tr class="c12"><td class="c10"><p class="c0"><span class="c26">&Delta;pitch</span></p></td><td class="c4"><p class="c0"><span>17.9</span></p></td><td class="c4"><p class="c0"><span>23.2</span></p></td><td class="c4"><p class="c0"><span>6.4</span></p></td><td class="c4"><p class="c0"><span>14.7</span></p></td></tr><tr class="c12"><td class="c10"><p class="c0"><span>direction</span></p></td><td class="c4"><p class="c0"><span>1</span></p></td><td class="c4"><p class="c0"><span>-1</span></p></td><td class="c4"><p class="c0"><span>1</span></p></td><td class="c4"><p class="c0"><span>-1</span></p></td></tr></tbody></table><p class="c0 c2"><span></span></p><p class="c1"><span>From the direction values that are left we get a fairly good idea of what the intonation pattern is, with 1 representing rising and -1 representing falling. The final value we get from warble for stimulus 7 is: rising-falling-rising-falling, which matches fairly well with the actual pattern. Figures 5 and 6 show the final generated graph that represents a best guess at the intonation pattern.</span></p><a href="#" name="21db45fcf2e620e467d4e75a57b2b2faeeb2cf3a"></a><a href="#" name="7"></a><table cellpadding="0" cellspacing="0" class="c5"><tbody><tr class="c12"><td class="c7"><p class="c0"><img height="176" src="images/image07.png" width="299"></p></td><td class="c7"><p class="c0"><img height="174" src="images/image13.png" width="228"></p></td></tr></tbody></table><p class="c1"><span class="c13">Figure 5 - Stimulus 7 - Intonation best guess</span></p><a href="#" name="21db45fcf2e620e467d4e75a57b2b2faeeb2cf3a"></a><a href="#" name="8"></a><table cellpadding="0" cellspacing="0" class="c5"><tbody><tr class="c12"><td class="c7"><p class="c0"><img height="175" src="images/image15.png" width="265"></p></td><td class="c7"><p class="c0"><img height="178" src="images/image02.png" width="209"></p></td></tr></tbody></table><p class="c1"><span class="c13">Figure 6 - Stimulus 8 - Intonation best guess</span></p><p class="c1 c14"><span>One of the difficulties of this system is that it relies heavily on parameters from the user. For instance, for many of the stimuli, using a filter threshold of 15 Hz works well, but for stimulus 7 and some others it actually produced less accurate results and a threshold of 5 Hz was better. Another parameter that can be adjusted is the sample size used in the pitch detection algorithm. The audio library that I used takes this parameter to determine the sample size used in the fast Fourier transform (FFT), which affects the number of data points you get back as well as the accuracy of those points. For this project I found that a sample size of 2048 bytes worked well, but given a different environment (microphone, acoustics of the room, recording software, or the subject&rsquo;s voice), a different sample size would very likely be preferable. The third major parameter is the level of the initial frequency filter that I applied. For the male subject a filter of 170 Hz was used, but for a female subject this obviously would not be the same. So after examining the Praat data for the female subject (whose voice had a much higher degree of fluctuation), I decided to use a filter at 400 Hz. This would be something that more sophisticated software would be able to detect automatically. Figures 7 and 8 show the results of stimuli 7 and 8 for the female subject. It is interesting to note that from the initial warble graph as well as the final intonation pattern graph shown here it is actually easier to see the intonation pattern than from looking at the Praat graph. Praat is clearly more sophisticated in many ways, but there is something to be said for simple software that does one thing and does it well.</span></p><a href="#" name="21db45fcf2e620e467d4e75a57b2b2faeeb2cf3a"></a><a href="#" name="9"></a><table cellpadding="0" cellspacing="0" class="c5"><tbody><tr class="c12"><td class="c7"><p class="c0"><img height="190" src="images/image04.png" width="292"></p></td><td class="c7"><p class="c0"><img height="189" src="images/image18.png" width="262"></p></td></tr></tbody></table><p class="c1"><span class="c13">Figure 7 - Stimulus 7 - Subject 2 - &ldquo;It&rsquo;s raining, isn&rsquo;t it?</span></p><a href="#" name="21db45fcf2e620e467d4e75a57b2b2faeeb2cf3a"></a><a href="#" name="10"></a><table cellpadding="0" cellspacing="0" class="c5"><tbody><tr class="c12"><td class="c7"><p class="c0"><img height="173" src="images/image08.png" width="292"></p></td><td class="c7"><p class="c0"><img height="186" src="images/image11.png" width="243"></p></td></tr></tbody></table><p class="c1"><span class="c13">Figure 8 - Stimulus 8 - Subject 2 - &ldquo;It&rsquo;s raining, isn&rsquo;t it?&rdquo; (unsure)</span></p><p class="c1 c14"><span>There are, however, several examples of warble not performing very well. These usually seem to be the result of insufficient filtering, and could be improved by using a variety of filters instead of just the vertical filter. One of the most pronounced of these is shown in figure 9.</span></p><a href="#" name="21db45fcf2e620e467d4e75a57b2b2faeeb2cf3a"></a><a href="#" name="11"></a><table cellpadding="0" cellspacing="0" class="c5"><tbody><tr class="c12"><td class="c7"><p class="c0"><img height="185" src="images/image10.png" width="295"></p></td><td class="c7"><p class="c0"><img height="192" src="images/image03.png" width="257"></p></td></tr></tbody></table><p class="c1"><span class="c13">Figure 9 - Stimulus 20 - Subject 2 - &ldquo;*Linguini isn&rsquo;t a good source of vitamins!&rdquo; (contradiction)</span></p><a href="#" name="21db45fcf2e620e467d4e75a57b2b2faeeb2cf3a"></a><a href="#" name="12"></a><table cellpadding="0" cellspacing="0" class="c5"><tbody><tr class="c12"><td class="c7"><p class="c0"><img height="192" src="images/image06.png" width="290"></p></td><td class="c7"><p class="c0"><img height="186" src="images/image16.png" width="272"></p></td></tr></tbody></table><p class="c1"><span class="c13">Figure 10 - Stimulus 20 - Subject 1</span></p><p class="c1 c14"><span>We can see that the warble approximation is on the right track; there is a definite falling-rising pattern, but there is still too much data to get a simple approximation like in figures 7 and 8. This is mostly caused by the fragmented nature of the available pitch data as seen in the Praat data in figure 9 and the spectrogram (Appx. B, Stimulus 20). Looking at the spectrogram reveals that the subject used a somewhat staccato speech pattern, which explains the data, but doesn&rsquo;t make analyzing the pitch any easier. In comparison, the data in figure 10 (same stimulus, different subject) looks almost perfect. This is the tradeoff that comes with simple software; it isn&rsquo;t able to compensate well for widely varying input data. Applying better filtering would improve the results, but it would likely be necessary to implement a smarter pattern detecting algorithm.</span></p><p class="c1"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;As noted in the previous discussion, there are many possibilities for improving warble. Better filtering is probably the most obvious of these, and it could include many things. The software could try to automatically determine what threshold to use in the pitch filtering; it could do some sort of filtering based on time, where pitches that last longer are weighted more than short pitches in the final approximation. Another type of filter that would be useful is a smoothing filter that takes the original pitch data and averages each data point against the surrounding points to get a more continuous pitch pattern. The software could also try to automatically determine the pitch limit for a given speaker, and try to choose the best sample rate by trying several.</span></p><p class="c1"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;These are all simple problems that can be fixed with a little bit of work. But there are deeper problems here that became obvious as I started working on this project, the most important being the ambiguity of intonation patterns. Even if it is fairly trivial to find the main intonation pattern in speech, how can we use that to determine the type of sentence? For example, if a rising-falling pattern is detected does that mean the phrase is a statement, wh-question, or tag question? If a rising pattern is detected does that indicate a yes-no question, echo question, or rising statement? Clearly some deeper analysis would be needed to actually determine the sentence type. Some of this could be accomplished by using a more precise annotation system, such as ToBI, but even that might not be enough.</span></p><p class="c1"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;While I was not able to accomplish my goal of categorizing sentence type for a recorded voice, I did make a lot of progress towards that end. I showed that simple software, such as warble, can be used to analyze speech in some meaningful way. I discovered many ways to improve the project, and discovered some of the limitations of this approach to speech processing.</span></p><p class="c1"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c1"><span>A full listing of the source code written for this project can be found at: </span><span class="c25"><a class="c18" href="https://github.com/jcelliott/warble">github.com/jcelliott/warble</a></span></p><p class="c3"><span class="c17">Appendix A: Stimuli</span></p><p class="c2 c3"><span></span></p><ol class="c27 lst-kix_whutoqnu9xi5-0 start" start="1"><li class="c6 c3"><span>Today is wednesday.</span></li><li class="c6 c3"><span>Is today wednesday?</span></li><li class="c6 c3"><span>It&rsquo;s nice outside today.</span></li><li class="c6 c3"><span>What&rsquo;s the weather like?</span></li><li class="c6 c3"><span>It&rsquo;s raining.</span></li><li class="c6 c3"><span>It&rsquo;s raining?</span></li><li class="c6 c3"><span>It&rsquo;s raining, isn&rsquo;t it?</span></li><li class="c6 c3"><span>(unsure) It&rsquo;s raining, isn&rsquo;t it?</span></li><li class="c6 c3"><span>Where&rsquo;s my car?</span></li><li class="c6 c3"><span>Did you steal my *car?</span></li><li class="c6 c3"><span>Did *you steal my car?</span></li><li class="c6 c3"><span>Who stole my car?</span></li><li class="c6 c3"><span>Did you say bob did?</span></li><li class="c6 c3"><span>Whose line is it anyway?</span></li><li class="c6 c3"><span>Go to your room.</span></li><li class="c6 c3"><span>Go to your room!</span></li><li class="c6 c3"><span>Please take out the trash.</span></li><li class="c6 c3"><span>Is linguini a good source of vitamins?</span></li><li class="c6 c3"><span>Linguini isn&rsquo;t a good source of *vitamins?</span></li><li class="c6 c3"><span>*Linguini isn&rsquo;t a good source of vitamins!</span></li><li class="c6 c3"><span>What happened?!</span></li><li class="c6 c3"><span>Look at that!</span></li><li class="c6 c3"><span>Is that how they&rsquo;re supposed to do it?</span></li><li class="c6 c3"><span>Yes, it is.</span></li><li class="c6 c3"><span>It&rsquo;s on the left</span></li><li class="c3 c6"><span>No, it&rsquo;s on the *right.</span></li><li class="c6 c3"><span>I booked my flight.</span></li><li class="c6 c3"><span>You did what?!</span></li></ol><p class="c2 c3"><span></span></p><p class="c3"><span>note: * marks where the stress falls when relevant</span></p><p class="c2 c3"><span></span></p><p class="c2 c3"><span></span></p><hr style="page-break-before:always;display:none;"><p class="c2 c3"><span></span></p><p class="c3"><span class="c17">Appendix B: Spectrograms</span></p><p class="c2 c3"><span></span></p><p class="c3"><span class="c13">Stimulus 1:</span></p><p class="c3"><img height="369" src="images/image20.png" width="459"></p><p class="c2 c3"><span></span></p><p class="c3"><span class="c13">Stimulus 7:</span></p><p class="c3"><img height="324" src="images/image01.png" width="460"></p><p class="c2 c3"><span></span></p><p class="c2 c3"><span></span></p><p class="c3"><span class="c13">Stimulus 8:</span></p><p class="c3"><img height="326" src="images/image19.png" width="461"></p><p class="c2 c3"><span></span></p><p class="c3"><span class="c13">Stimulus 20 - Subject 2:</span></p><p class="c3"><img height="270" src="images/image17.png" width="459"></p><div><p class="c8 c2 c3"><span></span></p></div><hr class="c20"><div><p class="c0"><a href="#ftnt_ref1" name="ftnt1">[1]</a><span class="c22">&nbsp;</span><span class="c11"><a class="c18" href="http://news.cnet.com/8301-10805_3-57547627-75/microsofts-new-translation-tech-speaks-chinese-in-your-own-voice/">http://news.cnet.com/8301-10805_3-57547627-75/microsofts-new-translation-tech-speaks-chinese-in-your- own-voice/</a></span></p></div><div><p class="c0"><a href="#ftnt_ref2" name="ftnt2">[2]</a><span class="c22">&nbsp;</span><span class="c11"><a class="c18" href="http://www.fon.hum.uva.nl/paul/papers/Proceedings_1993.pdf">http://www.fon.hum.uva.nl/paul/papers/Proceedings_1993.pdf</a></span></p></div><div><p class="c0"><a href="#ftnt_ref3" name="ftnt3">[3]</a><span class="c22">&nbsp;</span><span class="c11"><a class="c18" href="http://aubio.org/">http://aubio.org/</a></span></p></div></body></html>
